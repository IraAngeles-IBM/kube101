
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Lab 1. Set up and deploy your first application Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../Lab2/" />
    
    
    <link rel="prev" href="../pre-work/CLOUD_SHELL.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Getting Started</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../k8s.html">
            
                <a href="../k8s.html">
            
                    
                    What is Kubernetes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    Lab 0: Pre-requisite
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../pre-work/GET_STARTED.html">
            
                <a href="../pre-work/GET_STARTED.html">
            
                    
                    Create an IBM Cloud account / Access an K8s cluster
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../Lab0/">
            
                <a href="../Lab0/">
            
                    
                    Get the IBM Cloud Container Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../pre-work/CLOUD_SHELL.html">
            
                <a href="../pre-work/CLOUD_SHELL.html">
            
                    
                    Accessing the IBM Cloud Shell
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Labs</li>
        
        
    
        <li class="chapter active" data-level="2.1" data-path="./">
            
                <a href="./">
            
                    
                    Lab 1. Set up and deploy your first application
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../Lab2/">
            
                <a href="../Lab2/">
            
                    
                    Lab 2: Scale and Update Deployments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../Lab3/">
            
                <a href="../Lab3/">
            
                    
                    Lab 3: Scale and update apps natively, building multi-tier applications
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Resources</li>
        
        
    
        <li class="chapter " data-level="3.1" >
            
                <a target="_blank" href="https://developer.ibm.com">
            
                    
                    IBM Developer
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Lab 1. Set up and deploy your first application</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="lab-1-deploy-your-first-application">Lab 1. Deploy your first application</h1>
<p>Learn how to deploy an application to a Kubernetes cluster hosted within
the IBM Container Service.</p>
<h2 id="0-prerequisites">0. Prerequisites</h2>
<p>Make sure you satisfy the prerequisites as outlined in <a href="../Lab0/">Lab 0</a></p>
<h2 id="1-deploy-the-guestbook-application">1. Deploy the guestbook application</h2>
<p>In this part of the lab we will deploy an application called <code>guestbook</code>
that has already been built and uploaded to DockerHub under the name
<code>ibmcom/guestbook:v1</code>.</p>
<ol>
<li><p>Start by running <code>guestbook</code>:</p>
<pre><code class="lang-shell">kubectl create deployment guestbook --image=ibmcom/guestbook:v1
</code></pre>
<p>This action will take a bit of time. To check the status of the running application,
you can use <code>$ kubectl get pods</code>.</p>
<p>You should see output similar to the following:</p>
<pre><code class="lang-shell">kubectl get pods
</code></pre>
<p>Eventually, the status should show up as <code>Running</code>.</p>
<pre><code class="lang-shell">$ kubectl get pods
NAME                          READY     STATUS              RESTARTS   AGE
guestbook-59bd679fdc-bxdg7    1/1       Running             0          1m
</code></pre>
<p>The end result of the run command is not just the pod containing our application containers,
but a Deployment resource that manages the lifecycle of those pods.</p>
</li>
<li><p>Once the status reads <code>Running</code>, we need to expose that deployment as a
service so we can access it through the IP of the worker nodes.
The <code>guestbook</code> application listens on port 3000.  Run:</p>
<pre><code class="lang-shell">kubectl expose deployment guestbook --type=&quot;NodePort&quot; --port=3000
</code></pre>
</li>
<li><p>To find the port used on that worker node, examine your new service:</p>
<pre><code class="lang-shell">$ kubectl get service guestbook
NAME        TYPE       CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
guestbook   NodePort   10.10.10.253   &lt;none&gt;        3000:31208/TCP   1m
</code></pre>
<p>We can see that our <code>&lt;nodeport&gt;</code> is <code>31208</code>. We can see in the output the port mapping from 3000 inside
the pod exposed to the cluster on port 31208. This port in the 31000 range is automatically chosen,
and could be different for you.</p>
</li>
<li><p><code>guestbook</code> is now running on your cluster, and exposed to the internet. We need to find out where it is accessible.
The worker nodes running in the container service get external IP addresses.
Get the workers for your cluster and note one (any one) of the public IPs listed on the <code>&lt;public-IP&gt;</code> line. Replace <code>$CLUSTER_NAME</code> with your cluster name unless you have this environment variable set.</p>
<pre><code class="lang-shell">$ ibmcloud ks workers --cluster $CLUSTER_NAME
OK
ID                                                 Public IP        Private IP     Machine Type   State    Status   Zone    Version  
kube-hou02-pa1e3ee39f549640aebea69a444f51fe55-w1   173.193.99.136   10.76.194.30   free           normal   Ready    hou02   1.5.6_1500*
</code></pre>
<p>We can see that our <code>&lt;public-IP&gt;</code> is <code>173.193.99.136</code>.</p>
</li>
<li><p>Now that you have both the address and the port, you can now access the application in the web browser
at <code>&lt;public-IP&gt;:&lt;nodeport&gt;</code>. In the example case this is <code>173.193.99.136:31208</code>.</p>
</li>
</ol>
<p>Congratulations, you&apos;ve now deployed an application to Kubernetes!</p>
<p>When you&apos;re all done, continue to the
<a href="../Lab2/">next lab of this course</a>.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../pre-work/CLOUD_SHELL.html" class="navigation navigation-prev " aria-label="Previous page: Accessing the IBM Cloud Shell">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../Lab2/" class="navigation navigation-next " aria-label="Next page: Lab 2: Scale and Update Deployments">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Lab 1. Set up and deploy your first application","level":"2.1","depth":1,"next":{"title":"Lab 2: Scale and Update Deployments","level":"2.2","depth":1,"path":"Lab2/README.md","ref":"Lab2/README.md","articles":[]},"previous":{"title":"Accessing the IBM Cloud Shell","level":"1.3.3","depth":2,"path":"pre-work/CLOUD_SHELL.md","ref":"pre-work/CLOUD_SHELL.md","articles":[]},"dir":"ltr"},"config":{"plugins":[],"root":"./workshop","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"*"},"file":{"path":"Lab1/README.md","mtime":"2020-08-07T07:55:24.266Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-08-07T12:28:13.529Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

